<html>
<head>
    <title>Communicator Example</title>
    <script type="text/javascript" language="javascript" src="GWTCommunicator/GWTCommunicator.nocache.js"></script>
    <script type="text/javascript" language="javascript" src="communicator.js"></script>
    <script type="text/javascript" language="javascript">
        var communicator = new Communicator();
        communicator.connect({
            on: {
                connected: function() {
                    console.log('Connection established!');
                },
                error: function(err) {
                    console.log('Error occurred: ' + err);
                },
                received: function(msg) {
                    console.log('Received: ' + JSON.stringify(msg));
                },
                pong: function(time) {
                    var elapsed = new Date().getTime() - time;
                    alert("Pong received! Round-trip took: " + elapsed + "ms");
                }
            }
        });

        function ping() {
            communicator.send('ping', new Date().getTime());
        }
    </script>
</head>
<body>
Hello World!
<br/><br/>
<button id="pingButton" onclick="ping();">Ping</button>
</body>
</html>